include_directories(
  ${CMAKE_SOURCE_DIR}/src
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_BINARY_DIR}/src
  ${Boost_INCLUDE_DIRS}
  )

# Normal C++ source files
SET(MDTOOLS_SRCS
mdtools.cpp
NAMDCoorReader.cpp
PsfReader.cpp
)

##########
# CueMol interface definitions for MCWRAPGEN

SET(MDTOOLS_MCWG_QIFS
NAMDCoorReader.qif
  )

# module loader generated by MCWG
SET(MDTOOLS_MODLDR_SRC mdtools.moddef)

MCWRAPGEN_CLASS(MDTOOLS_SRCS ${MDTOOLS_MCWG_QIFS})
MCWRAPGEN_MODULE(MDTOOLS_SRCS ${MDTOOLS_MODLDR_SRC} ${MDTOOLS_MCWG_QIFS})

# add_library(mdtools SHARED ${MDTOOLS_SRCS} ${MCWG_HEADERS})
add_library(mdtools STATIC ${MDTOOLS_SRCS} ${MCWG_HEADERS})

if (WIN32)
  add_definitions(-DMDTOOLS_EXPORTS=1)
else()
  target_compile_options(mdtools PUBLIC "-fPIC")
endif()

target_link_libraries(mdtools PRIVATE qlib gfx qsys molstr)

MCWRAPGEN_SCR_WRAPPERS(mdtools)

install(TARGETS mdtools
  RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
  LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
  )
