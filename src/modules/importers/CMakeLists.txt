include_directories(
  ${CMAKE_SOURCE_DIR}/src
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_BINARY_DIR}/src
  ${Boost_INCLUDE_DIRS}
  )

# Normal C++ source files
SET(IMPORTERS_SRCS
importers.cpp
PSEFileReader.cpp
PickleInStream.cpp
AtomPropColoring.cpp
MmcifMolReader.cpp
SDFMolReader.cpp
MOL2MolReader.cpp
  )

##########
# CueMol interface definitions for MCWRAPGEN

SET(IMPORTERS_MCWG_QIFS
PSEFileReader.qif
AtomPropColoring.qif
MmcifMolReader.qif
SDFMolReader.qif
MOL2MolReader.qif
  )

# module loader generated by MCWG
SET(IMPORTERS_MODLDR_SRC importers.moddef)

MCWRAPGEN_CLASS(IMPORTERS_SRCS ${IMPORTERS_MCWG_QIFS})
MCWRAPGEN_MODULE(IMPORTERS_SRCS ${IMPORTERS_MODLDR_SRC} ${IMPORTERS_MCWG_QIFS})

if (WIN32)
  add_definitions(-DIMPORTERS_EXPORTS=1)
endif()

add_library(importers SHARED ${IMPORTERS_SRCS})
target_link_libraries(importers PRIVATE qlib gfx qsys molstr molvis surface symm)

add_custom_target(importers_generate_headers DEPENDS ${MCWG_HEADERS})
add_dependencies(importers importers_generate_headers)

install(TARGETS importers
  RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
  LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
  )
