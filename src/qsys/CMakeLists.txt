include_directories(
  ${CMAKE_SOURCE_DIR}/src
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_BINARY_DIR}/src
  ${Boost_INCLUDE_DIRS}
  )

# Normal C++ source files
SET(QSYS_SRCS
DispCacheRenderer.cpp
DispListRenderer.cpp
SceneManager.cpp
Scene.cpp
View.cpp
Camera.cpp
Object.cpp
Renderer.cpp
RendererFactory.cpp
StreamManager.cpp
ObjReader.cpp
ObjWriter.cpp
SysConfig.cpp
UndoManager.cpp
ObjLoadEditInfo.cpp
SceneXMLReader.cpp
SceneXMLWriter.cpp
InDevEvent.cpp
ObjectEvent.cpp
RendererEvent.cpp
SceneEvent.cpp
ViewEvent.cpp
ScalarObject.cpp
ScrEventManager.cpp
InOutHandler.cpp
QdfStream.cpp
QdfAbsReader.cpp
ViewInputConfig.cpp
PropEditInfo.cpp
style/StyleMgr.cpp
style/StyleMgrStyleImpl.cpp
style/StyleSet.cpp
style/StyleSheet.cpp
style/StyleFile.cpp
style/StyleEditInfo.cpp
style/StyleColor.cpp
style/StyleStrData.cpp
style/StyleSupports.cpp
anim/AnimMgr.cpp
anim/AnimObj.cpp
anim/AnimObjEvent.cpp
qsys.cpp
SceneExporter.cpp
RendGroup.cpp
MultiGradient.cpp
TTYView.cpp
QdfAbsWriter.cpp
  )

# CueMol interface definitions for MCWRAPGEN
SET(QSYS_MCWG_QIFS
Renderer.qif
Scene.qif
SceneManager.qif
StreamManager.qif
View.qif
Object.qif
Camera.qif
SceneXMLReader.qif
SceneXMLWriter.qif
ObjReader.qif
ObjWriter.qif
ScrEventManager.qif
InOutHandler.qif
DrawObj.qif
style/StyleManager.qif
style/StyleSet.qif
ViewInputConfig.qif
anim/AnimMgr.qif
anim/AnimObj.qif
SceneExporter.qif
RendGroup.qif
MultiGradient.qif
ScalarObject.qif
  )

# module loader generated by MCWG
SET(QSYS_MODLDR_SRC qsys.moddef)

MCWRAPGEN_CLASS(QSYS_SRCS ${QSYS_MCWG_QIFS})
MCWRAPGEN_MODULE(QSYS_SRCS ${QSYS_MODLDR_SRC} ${QSYS_MCWG_QIFS})

if (WIN32)
  add_definitions(-DQSYS_EXPORTS=1)
endif()
add_definitions(-DNO_SCRIPT=1)

add_library(qsys SHARED ${QSYS_SRCS})
target_link_libraries(qsys PRIVATE qlib gfx Boost::filesystem Boost::thread)

add_custom_target(qsys_generate_headers DEPENDS ${MCWG_HEADERS})
add_dependencies(qsys qsys_generate_headers)

install(TARGETS qsys
  RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
  LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
  )
